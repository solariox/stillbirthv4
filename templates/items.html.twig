{% extends "layout.html.twig" %} {% block content %}
<link rel="stylesheet" type="text/css" href="{{ asset('css/items.css') }}">
  <div class="modal">
  </div>
      <ul class="itemlist">
        {% for item in itemsList %}
        <li class="itembox" id="item-{{item.id}}" data-toggle="modal" data-target="modal-item-{{item.id}}">
          <img class="pixel" src="img/sprite/{{item.img}}">
        </li>
        {% endfor %}
      </ul>

      <div class="box_description">
        <p>

        </p>
      </div>
    </div>

    <!-- The Modal -->
    <div id="itemModal" class="modal">
      <!-- Modal content -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <img id="modal-img" src="">
        <p class="modal-text"></p>

      </div>
    <!-- end of Modal -->

    <script>

    (function($){
        $('#header__icon').click(function(e){
          e.preventDefault();
          $('body').toggleClass('with--sidebar');
        })
      })(jQuery);
    


    var itemList = {{itemJson|raw}};

    var modal = document.getElementById('itemModal');

  // When the user hover the box, show stats
    $('.itembox').mouseenter(function (e) {
      var id = $(this).attr('id');
      itemList.forEach(function (item) {
        if ("item-" + item.id == id) {

          $(".box_description").text(item.name);
          $("#modal-img").attr("src","img/sprite/"+ item.img );
        };
      });
    }).mouseleave(function (e) {
      $(".box_description").text("");
    });


    // When the user clicks on the box, open the modal
  $('.itembox').click(function (e) {
    var id = $(this).attr('id');
    itemList.forEach(function (item) {
      if ("item-" + item.id == id) {
        $(".modal-text").text(item.description);
        modal.style.display = "block";
      };
    });
  });
  $('.close').click(function(){
    modal.style.display = "none";
  })

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }


    </script>

    {% endblock %}
